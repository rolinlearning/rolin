---
import type { GetStaticPaths } from "astro";
import Layout from "../../layouts/Layout.astro"
import { getCollection, type CollectionEntry } from "astro:content";
import { formatDate } from "../../utils/date";

interface Props {
  post: CollectionEntry<'blog'>
}

export const getStaticPaths = ( async () => {
  const posts = await getCollection('blog')
  return posts.map((post: CollectionEntry<'blog'>) => ({
    params: {slug: post.slug},
    props: {post}
  }));
}) satisfies GetStaticPaths;

const {post} = Astro.props
const {Content} = await post.render()
---

<Layout title={post.data.title}>
  <!-- <p class="mt-16 space-y-12 max-w-3xl mx-auto px-6 md:px-8 lg:px-12"></p> -->
  <article class="max-w-3xl mx-auto px-6 sm:px-6 lg:px-12 py-12 prose dark:prose-invert" >
   <!-- <article class="mt-16 space-y-12 md:px-8"> -->
    <header class="mb-8">
      <h1>{post.data.title}</h1>
      <div class="text-sm text-gray-500">
          <time datetime={post.data.pubDate.toISOString()}>
            {formatDate(post.data.pubDate)}
          </time>
          <span class="mx-1">.</span>
          <span>{post.data.author}</span>
      </div>
    </header>
    <Content/>
  </article>
</Layout>
